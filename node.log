warning: unused import: `SecretKey`
 --> src/hsm_provider.rs:1:37
  |
1 | use bitcoin::secp256k1::{PublicKey, SecretKey};
  |                                     ^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: unused import: `Row`
 --> src/rgb_db_adapter.rs:1:20
  |
1 | use sqlx::{PgPool, Row};
  |                    ^^^

warning: unused import: `std::path::Path`
 --> src/sqlite_proxy.rs:2:5
  |
2 | use std::path::Path;
  |     ^^^^^^^^^^^^^^^

warning: unused import: `crate::telegram_integration::TelegramIntegration`
 --> src/user_api.rs:4:5
  |
4 | use crate::telegram_integration::TelegramIntegration;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::virtual_htlc::VirtualHtlcManager`
 --> src/virtual_context.rs:4:5
  |
4 | use crate::virtual_htlc::VirtualHtlcManager;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::virtual_balance::VirtualBalanceManager`
 --> src/virtual_context.rs:5:5
  |
5 | use crate::virtual_balance::VirtualBalanceManager;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::virtual_router::VirtualRouter`
 --> src/virtual_context.rs:6:5
  |
6 | use crate::virtual_router::VirtualRouter;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `bitcoin::secp256k1::PublicKey`
 --> src/virtual_channel.rs:2:5
  |
2 | use bitcoin::secp256k1::PublicKey;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `lightning::ln::types::ChannelId`
 --> src/virtual_channel.rs:3:5
  |
3 | use lightning::ln::types::ChannelId;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::collections::HashMap`
 --> src/virtual_channel.rs:4:5
  |
4 | use std::collections::HashMap;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `lightning::routing::router::Route`
 --> src/virtual_router.rs:4:5
  |
4 | use lightning::routing::router::Route;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused variable: `user_id`
  --> src/hsm_provider.rs:64:44
   |
64 |     async fn derive_virtual_node_id(&self, user_id: &str) -> Result<PublicKey, HsmError> {
   |                                            ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`
   |
   = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `user_id`
  --> src/hsm_provider.rs:70:46
   |
70 |     async fn get_virtual_keys_manager(&self, user_id: &str) -> Result<VirtualKeysManager, HsmError> {
   |                                              ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`

warning: unused variable: `user_id`
  --> src/hsm_provider.rs:89:44
   |
89 |     async fn derive_virtual_node_id(&self, user_id: &str) -> Result<PublicKey, HsmError> {
   |                                            ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`

warning: unused variable: `user_id`
  --> src/hsm_provider.rs:95:46
   |
95 |     async fn get_virtual_keys_manager(&self, user_id: &str) -> Result<VirtualKeysManager, HsmError> {
   |                                              ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_user_id`

warning: struct `UserWallet` is never constructed
  --> src/database.rs:12:12
   |
12 | pub struct UserWallet {
   |            ^^^^^^^^^^
   |
   = note: `UserWallet` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis
   = note: `#[warn(dead_code)]` on by default

warning: struct `UserTransaction` is never constructed
  --> src/database.rs:20:12
   |
20 | pub struct UserTransaction {
   |            ^^^^^^^^^^^^^^^
   |
   = note: `UserTransaction` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis

warning: struct `UserChannel` is never constructed
  --> src/database.rs:31:12
   |
31 | pub struct UserChannel {
   |            ^^^^^^^^^^^
   |
   = note: `UserChannel` has derived impls for the traits `Clone` and `Debug`, but these are intentionally ignored during dead code analysis

warning: multiple methods are never used
   --> src/database.rs:61:18
    |
40  | impl Database {
    | ------------- methods in this implementation
...
61  |     pub async fn create_user_wallet(&self, user_id: &str, mnemonic_encrypted: &str, derivation_path: &str) -> Result<()> {
    |                  ^^^^^^^^^^^^^^^^^^
...
71  |     pub async fn get_user_wallet(&self, user_id: &str) -> Result<Option<UserWallet>> {
    |                  ^^^^^^^^^^^^^^^
...
88  |     pub async fn save_user_transaction(&self, user_id: &str, txid: &str, amount: i64, asset_id: Option<&str>, status: &str) -> Result<Uui...
    |                  ^^^^^^^^^^^^^^^^^^^^^
...
99  |     pub async fn get_user_transactions(&self, user_id: &str) -> Result<Vec<UserTransaction>> {
    |                  ^^^^^^^^^^^^^^^^^^^^^
...
119 |     pub async fn save_user_channel(&self, user_id: &str, channel_id: &str, peer_pubkey: &str, capacity_sats: i64, status: &str) -> Result...
    |                  ^^^^^^^^^^^^^^^^^
...
130 |     pub async fn get_user_channels(&self, user_id: &str) -> Result<Vec<UserChannel>> {
    |                  ^^^^^^^^^^^^^^^^^
...
149 |     pub async fn update_user_balance(&self, user_id: &str, asset_id: Option<&str>, balance: i64) -> Result<()> {
    |                  ^^^^^^^^^^^^^^^^^^^
...
171 |     pub async fn get_user_balances(&self, user_id: &str) -> Result<HashMap<String, i64>> {
    |                  ^^^^^^^^^^^^^^^^^
...
198 |     pub async fn get_user_addresses(&self, user_id: &str) -> Result<Vec<String>> {
    |                  ^^^^^^^^^^^^^^^^^^

warning: fields `master_keys` and `user_id` are never read
  --> src/hsm.rs:53:5
   |
52 | pub struct VirtualKeysManager {
   |            ------------------ fields in this struct
53 |     master_keys: Arc<KeysManager>,
   |     ^^^^^^^^^^^
54 |     virtual_node_secret: SecretKey,
55 |     user_id: String,
   |     ^^^^^^^
   |
   = note: `VirtualKeysManager` has a derived impl for the trait `Clone`, but this is intentionally ignored during dead code analysis

warning: methods `get_virtual_node_secret`, `get_user_id`, and `derive_channel_keys` are never used
  --> src/hsm.rs:74:12
   |
58 | impl VirtualKeysManager {
   | ----------------------- methods in this implementation
...
74 |     pub fn get_virtual_node_secret(&self) -> SecretKey {
   |            ^^^^^^^^^^^^^^^^^^^^^^^
...
79 |     pub fn get_user_id(&self) -> &str {
   |            ^^^^^^^^^^^
...
84 |     pub fn derive_channel_keys(&self, channel_value_satoshis: u64, params: &[u8; 32]) -> SecretKey {
   |            ^^^^^^^^^^^^^^^^^^^

warning: method `derive_virtual_node_id` is never used
  --> src/hsm_provider.rs:10:14
   |
8  | pub trait HsmProvider: Send + Sync {
   |           ----------- method in this trait
9  |     /// Derive virtual node ID for a user
10 |     async fn derive_virtual_node_id(&self, user_id: &str) -> Result<PublicKey, HsmError>;
   |              ^^^^^^^^^^^^^^^^^^^^^^

warning: variants `KeyDerivation` and `InvalidUserId` are never constructed
  --> src/hsm_provider.rs:19:5
   |
17 | pub enum HsmError {
   |          -------- variants in this enum
18 |     #[error("Key derivation failed: {0}")]
19 |     KeyDerivation(String),
   |     ^^^^^^^^^^^^^
...
23 |     InvalidUserId(String),
   |     ^^^^^^^^^^^^^
   |
   = note: `HsmError` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis

warning: fields `endpoint` and `credentials` are never read
  --> src/hsm_provider.rs:52:5
   |
51 | pub struct CloudHsmProvider {
   |            ---------------- fields in this struct
52 |     endpoint: String,
   |     ^^^^^^^^
53 |     credentials: String,
   |     ^^^^^^^^^^^

warning: associated function `new` is never used
  --> src/hsm_provider.rs:57:12
   |
56 | impl CloudHsmProvider {
   | --------------------- associated function in this implementation
57 |     pub fn new(endpoint: String, credentials: String) -> Self {
   |            ^^^

warning: field `device_path` is never read
  --> src/hsm_provider.rs:78:5
   |
77 | pub struct HardwareHsmProvider {
   |            ------------------- field in this struct
78 |     device_path: String,
   |     ^^^^^^^^^^^

warning: associated function `new` is never used
  --> src/hsm_provider.rs:82:12
   |
81 | impl HardwareHsmProvider {
   | ------------------------ associated function in this implementation
82 |     pub fn new(device_path: String) -> Self {
   |            ^^^

warning: struct `RgbDatabaseAdapter` is never constructed
 --> src/rgb_db_adapter.rs:7:12
  |
7 | pub struct RgbDatabaseAdapter {
  |            ^^^^^^^^^^^^^^^^^^

warning: associated items `new`, `setup_rgb_database_redirect`, `migrate_rgb_tables`, and `convert_sqlite_to_postgres` are never used
  --> src/rgb_db_adapter.rs:13:12
   |
12 | impl RgbDatabaseAdapter {
   | ----------------------- associated items in this implementation
13 |     pub fn new(pool: Arc<PgPool>) -> Self {
   |            ^^^
...
21 |     pub async fn setup_rgb_database_redirect(&self) -> Result<(), sqlx::Error> {
   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
33 |     async fn migrate_rgb_tables(&self) -> Result<(), sqlx::Error> {
   |              ^^^^^^^^^^^^^^^^^^
...
49 |     pub fn convert_sqlite_to_postgres(&self, query: &str) -> String {
   |            ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: function `setup_rgb_postgres_adapter` is never used
  --> src/rgb_db_adapter.rs:74:8
   |
74 | pub fn setup_rgb_postgres_adapter(pool: Arc<PgPool>) -> RgbDatabaseAdapter {
   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: static `INIT` is never used
 --> src/rgb_db_fix.rs:6:8
  |
6 | static INIT: Once = Once::new();
  |        ^^^^

warning: function `configure_rgb_database` is never used
 --> src/rgb_db_fix.rs:8:8
  |
8 | pub fn configure_rgb_database() {
  |        ^^^^^^^^^^^^^^^^^^^^^^

warning: function `wait_for_rgb_ready` is never used
  --> src/rgb_db_fix.rs:28:14
   |
28 | pub async fn wait_for_rgb_ready() {
   |              ^^^^^^^^^^^^^^^^^^

warning: struct `SqliteProxy` is never constructed
 --> src/sqlite_proxy.rs:7:12
  |
7 | pub struct SqliteProxy {
  |            ^^^^^^^^^^^

warning: associated items `new` and `setup_sqlite_redirect` are never used
  --> src/sqlite_proxy.rs:12:12
   |
11 | impl SqliteProxy {
   | ---------------- associated items in this implementation
12 |     pub fn new(pg_pool: Arc<PgPool>) -> Self {
   |            ^^^
...
17 |     pub fn setup_sqlite_redirect(&self) -> Result<(), Box<dyn std::error::Error>> {
   |            ^^^^^^^^^^^^^^^^^^^^^

warning: function `redirect_rgb_database_to_memory` is never used
  --> src/sqlite_proxy.rs:36:8
   |
36 | pub fn redirect_rgb_database_to_memory() -> Result<(), Box<dyn std::error::Error>> {
   |        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: multiple methods are never used
   --> src/user_manager.rs:40:18
    |
19  | impl UserManager {
    | ---------------- methods in this implementation
...
40  |     pub async fn get_user_context(&self, user_id: &str) -> Result<UserContext, AppError> {
    |                  ^^^^^^^^^^^^^^^^
...
60  |     async fn create_user_wallet(&self, user_id: &str) -> Result<(), AppError> {
    |              ^^^^^^^^^^^^^^^^^^
...
76  |     pub async fn update_user_balance(&self, user_id: &str, asset_id: Option<&str>, amount: i64) -> Result<(), AppError> {
    |                  ^^^^^^^^^^^^^^^^^^^
...
89  |     pub async fn save_user_transaction(&self, user_id: &str, txid: &str, amount: i64, asset_id: Option<&str>, status: &str) -> Result<(),...
    |                  ^^^^^^^^^^^^^^^^^^^^^
...
103 |     pub async fn get_user_transactions(&self, user_id: &str) -> Result<Vec<crate::database::UserTransaction>, AppError> {
    |                  ^^^^^^^^^^^^^^^^^^^^^
...
109 |     pub async fn save_user_channel(&self, user_id: &str, channel_id: &str, peer_pubkey: &str, capacity_sats: i64, status: &str) -> Result...
    |                  ^^^^^^^^^^^^^^^^^
...
116 |     pub async fn get_user_channels(&self, user_id: &str) -> Result<Vec<crate::database::UserChannel>, AppError> {
    |                  ^^^^^^^^^^^^^^^^^

warning: fields `users` and `database_url` are never read
  --> src/telegram_integration.rs:19:5
   |
18 | pub struct TelegramIntegration {
   |            ------------------- fields in this struct
19 |     users: Arc<RwLock<HashMap<i64, TelegramUser>>>,
   |     ^^^^^
20 |     database_url: String,
   |     ^^^^^^^^^^^^
   |
   = note: `TelegramIntegration` has a derived impl for the trait `Clone`, but this is intentionally ignored during dead code analysis

warning: methods `register_user`, `validate_session`, `get_user_data_dir`, and `generate_session_token` are never used
  --> src/telegram_integration.rs:32:18
   |
23 | impl TelegramIntegration {
   | ------------------------ methods in this implementation
...
32 |     pub async fn register_user(&self, user_id: i64, username: Option<String>, first_name: String) -> Result<String, Box<dyn std::error::E...
   |                  ^^^^^^^^^^^^^
...
54 |     pub async fn validate_session(&self, user_id: i64, token: &str) -> bool {
   |                  ^^^^^^^^^^^^^^^^
...
63 |     pub fn get_user_data_dir(&self, user_id: i64) -> String {
   |            ^^^^^^^^^^^^^^^^^
...
67 |     fn generate_session_token(&self, user_id: i64) -> String {
   |        ^^^^^^^^^^^^^^^^^^^^^^

warning: method `get_virtual_node_id` is never used
  --> src/virtual_node.rs:37:18
   |
13 | impl VirtualNodeManager {
   | ----------------------- method in this implementation
...
37 |     pub async fn get_virtual_node_id(&self, user_id: &str) -> Result<PublicKey, crate::hsm_provider::HsmError> {
   |                  ^^^^^^^^^^^^^^^^^^^

warning: fields `user_id` and `virtual_keys` are never read
  --> src/virtual_context.rs:13:9
   |
12 | pub struct VirtualNodeContext {
   |            ------------------ fields in this struct
13 |     pub user_id: String,
   |         ^^^^^^^
14 |     pub virtual_node_id: PublicKey,
15 |     pub virtual_keys: VirtualKeysManager,
   |         ^^^^^^^^^^^^
   |
   = note: `VirtualNodeContext` has a derived impl for the trait `Clone`, but this is intentionally ignored during dead code analysis

warning: method `owns_channel` is never used
  --> src/virtual_context.rs:53:18
   |
19 | impl VirtualNodeContext {
   | ----------------------- method in this implementation
...
53 |     pub async fn owns_channel(&self, channel_id: &str) -> bool {
   |                  ^^^^^^^^^^^^

warning: methods `map_channel_to_virtual_node`, `get_virtual_node_for_channel`, and `map_payment_to_virtual_node` are never used
  --> src/virtual_channel.rs:18:18
   |
12 | impl VirtualChannelManager {
   | -------------------------- methods in this implementation
...
18 |     pub async fn map_channel_to_virtual_node(&self, channel_id: &str, virtual_node_id: &str, user_id: i64) -> Result<(), sqlx::Error> {
   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
41 |     pub async fn get_virtual_node_for_channel(&self, channel_id: &str) -> Result<Option<String>, sqlx::Error> {
   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
...
53 |     pub async fn map_payment_to_virtual_node(&self, payment_hash: &str, virtual_node_id: &str, user_id: i64, inbound: bool) -> Result<(),...
   |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: struct `VirtualHtlc` is never constructed
  --> src/virtual_htlc.rs:11:12
   |
11 | pub struct VirtualHtlc {
   |            ^^^^^^^^^^^
   |
   = note: `VirtualHtlc` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: struct `RgbTransfer` is never constructed
  --> src/virtual_htlc.rs:21:12
   |
21 | pub struct RgbTransfer {
   |            ^^^^^^^^^^^
   |
   = note: `RgbTransfer` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: variants `Pending`, `Settled`, and `Failed` are never constructed
  --> src/virtual_htlc.rs:28:5
   |
27 | pub enum VirtualHtlcStatus {
   |          ----------------- variants in this enum
28 |     Pending,
   |     ^^^^^^^
29 |     Settled,
   |     ^^^^^^^
30 |     Failed,
   |     ^^^^^^
   |
   = note: `VirtualHtlcStatus` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: struct `VirtualHtlcManager` is never constructed
  --> src/virtual_htlc.rs:34:12
   |
34 | pub struct VirtualHtlcManager {
   |            ^^^^^^^^^^^^^^^^^^

warning: associated items `new`, `create_virtual_htlc`, `settle_virtual_htlc`, `fail_virtual_htlc`, and `get_pending_htlcs` are never used
   --> src/virtual_htlc.rs:40:12
    |
39  | impl VirtualHtlcManager {
    | ----------------------- associated items in this implementation
40  |     pub fn new(virtual_channel_manager: Arc<crate::virtual_channel::VirtualChannelManager>) -> Self {
    |            ^^^
...
48  |     pub async fn create_virtual_htlc(
    |                  ^^^^^^^^^^^^^^^^^^^
...
94  |     pub async fn settle_virtual_htlc(
    |                  ^^^^^^^^^^^^^^^^^^^
...
137 |     pub async fn fail_virtual_htlc(&self, payment_hash: PaymentHash) -> Result<(), VirtualHtlcError> {
    |                  ^^^^^^^^^^^^^^^^^
...
149 |     pub async fn get_pending_htlcs(&self, virtual_node: &PublicKey) -> Vec<VirtualHtlc> {
    |                  ^^^^^^^^^^^^^^^^^

warning: struct `VirtualSettlement` is never constructed
   --> src/virtual_htlc.rs:164:12
    |
164 | pub struct VirtualSettlement {
    |            ^^^^^^^^^^^^^^^^^
    |
    = note: `VirtualSettlement` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: variants `HtlcNotFound`, `InvalidPreimage`, `Database`, and `InsufficientBalance` are never constructed
   --> src/virtual_htlc.rs:176:5
    |
174 | pub enum VirtualHtlcError {
    |          ---------------- variants in this enum
175 |     #[error("HTLC not found")]
176 |     HtlcNotFound,
    |     ^^^^^^^^^^^^
177 |     #[error("Invalid preimage")]
178 |     InvalidPreimage,
    |     ^^^^^^^^^^^^^^^
179 |     #[error("Database error: {0}")]
180 |     Database(String),
    |     ^^^^^^^^
181 |     #[error("Insufficient balance")]
182 |     InsufficientBalance,
    |     ^^^^^^^^^^^^^^^^^^^
    |
    = note: `VirtualHtlcError` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis

warning: methods `has_rgb_transfer`, `rgb_contract_id`, and `rgb_amount` are never used
   --> src/virtual_htlc.rs:187:12
    |
185 | impl VirtualSettlement {
    | ---------------------- methods in this implementation
186 |     /// Check if this settlement includes RGB transfer
187 |     pub fn has_rgb_transfer(&self) -> bool {
    |            ^^^^^^^^^^^^^^^^
...
192 |     pub fn rgb_contract_id(&self) -> Option<ContractId> {
    |            ^^^^^^^^^^^^^^^
...
197 |     pub fn rgb_amount(&self) -> Option<u64> {
    |            ^^^^^^^^^^

warning: struct `VirtualBalanceManager` is never constructed
 --> src/virtual_balance.rs:9:12
  |
9 | pub struct VirtualBalanceManager {
  |            ^^^^^^^^^^^^^^^^^^^^^

warning: multiple associated items are never used
   --> src/virtual_balance.rs:16:12
    |
15  | impl VirtualBalanceManager {
    | -------------------------- associated items in this implementation
16  |     pub fn new(database: Arc<crate::database::Database>) -> Self {
    |            ^^^
...
25  |     pub async fn apply_settlement(&self, settlement: &VirtualSettlement) -> Result<(), BalanceError> {
    |                  ^^^^^^^^^^^^^^^^
...
62  |     async fn update_btc_balance(&self, virtual_node: &PublicKey, delta: i64) -> Result<(), BalanceError> {
    |              ^^^^^^^^^^^^^^^^^^
...
79  |     async fn update_rgb_balance(
    |              ^^^^^^^^^^^^^^^^^^
...
103 |     pub async fn get_btc_balance(&self, virtual_node: &PublicKey) -> u64 {
    |                  ^^^^^^^^^^^^^^^
...
109 |     pub async fn get_rgb_balance(&self, virtual_node: &PublicKey, contract_id: ContractId) -> u64 {
    |                  ^^^^^^^^^^^^^^^
...
116 |     pub async fn check_sufficient_balance(
    |                  ^^^^^^^^^^^^^^^^^^^^^^^^

warning: variants `InsufficientBtc`, `InsufficientRgb`, and `Database` are never constructed
   --> src/virtual_balance.rs:150:5
    |
148 | pub enum BalanceError {
    |          ------------ variants in this enum
149 |     #[error("Insufficient BTC balance: required {required}, available {available}")]
150 |     InsufficientBtc { required: u64, available: u64 },
    |     ^^^^^^^^^^^^^^^
151 |     #[error("Insufficient RGB balance for {contract_id}: required {required}, available {available}")]
152 |     InsufficientRgb {
    |     ^^^^^^^^^^^^^^^
...
158 |     Database(String),
    |     ^^^^^^^^
    |
    = note: `BalanceError` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis

warning: struct `VirtualRouter` is never constructed
  --> src/virtual_router.rs:13:12
   |
13 | pub struct VirtualRouter {
   |            ^^^^^^^^^^^^^

warning: associated items `new`, `send_virtual_payment`, `settle_virtual_payment`, `create_virtual_invoice`, and `pay_virtual_invoice` are never used
   --> src/virtual_router.rs:20:12
    |
19  | impl VirtualRouter {
    | ------------------ associated items in this implementation
20  |     pub fn new(
    |            ^^^
...
33  |     pub async fn send_virtual_payment(
    |                  ^^^^^^^^^^^^^^^^^^^^
...
73  |     pub async fn settle_virtual_payment(
    |                  ^^^^^^^^^^^^^^^^^^^^^^
...
102 |     pub async fn create_virtual_invoice(
    |                  ^^^^^^^^^^^^^^^^^^^^^^
...
135 |     pub async fn pay_virtual_invoice(
    |                  ^^^^^^^^^^^^^^^^^^^

warning: struct `VirtualPaymentResult` is never constructed
   --> src/virtual_router.rs:156:12
    |
156 | pub struct VirtualPaymentResult {
    |            ^^^^^^^^^^^^^^^^^^^^
    |
    = note: `VirtualPaymentResult` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: struct `VirtualInvoice` is never constructed
   --> src/virtual_router.rs:163:12
    |
163 | pub struct VirtualInvoice {
    |            ^^^^^^^^^^^^^^
    |
    = note: `VirtualInvoice` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: struct `RgbInvoiceRequest` is never constructed
   --> src/virtual_router.rs:173:12
    |
173 | pub struct RgbInvoiceRequest {
    |            ^^^^^^^^^^^^^^^^^
    |
    = note: `RgbInvoiceRequest` has derived impls for the traits `Debug` and `Clone`, but these are intentionally ignored during dead code analysis

warning: variants `InsufficientBalance`, `HtlcCreation`, `Settlement`, `BalanceUpdate`, and `RoutingFailed` are never constructed
   --> src/virtual_router.rs:181:5
    |
179 | pub enum VirtualRouterError {
    |          ------------------ variants in this enum
180 |     #[error("Insufficient balance: {0}")]
181 |     InsufficientBalance(String),
    |     ^^^^^^^^^^^^^^^^^^^
182 |     #[error("HTLC creation failed: {0}")]
183 |     HtlcCreation(String),
    |     ^^^^^^^^^^^^
184 |     #[error("Settlement failed: {0}")]
185 |     Settlement(String),
    |     ^^^^^^^^^^
186 |     #[error("Balance update failed: {0}")]
187 |     BalanceUpdate(String),
    |     ^^^^^^^^^^^^^
188 |     #[error("Routing failed: {0}")]
189 |     RoutingFailed(String),
    |     ^^^^^^^^^^^^^
    |
    = note: `VirtualRouterError` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis

warning: field `asset_id` is never read
  --> src/virtual_api.rs:39:9
   |
38 | pub struct VirtualAssetBalanceRequest {
   |            -------------------------- field in this struct
39 |     pub asset_id: String,
   |         ^^^^^^^^

warning: `rgb-lightning-node` (bin "rgb-lightning-node") generated 61 warnings (run `cargo fix --bin "rgb-lightning-node"` to apply 11 suggestions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.35s
     Running `target/debug/rgb-lightning-node /home/oem/.lighening-node-storage --daemon-listening-port 3001 --network testnet`
[2m2025-10-25T20:42:59.535332Z[0m [32m INFO[0m [2mrgb_lightning_node::utils[0m[2m:[0m DATABASE_URL found - multi-user support will be enabled after unlock
[2m2025-10-25T20:42:59.538062Z[0m [32m INFO[0m [2mrgb_lightning_node[0m[2m:[0m Listening on 0.0.0.0:3001
[2m2025-10-25T20:43:09.112324Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3muri[0m[2m=[0m/unlock [3mrequest_id[0m[2m=[0m27989593-c577-4c6f-b6f3-146bcc353be1[1m}[0m[2m:[0m [2mrgb_lightning_node[0m[2m:[0m STARTED
[2m2025-10-25T20:43:09.113417Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3muri[0m[2m=[0m/unlock [3mrequest_id[0m[2m=[0m27989593-c577-4c6f-b6f3-146bcc353be1[1m}[0m[2m:[0m [2mrgb_lightning_node::routes[0m[2m:[0m Unlock started
[2m2025-10-25T20:43:09.621002Z[0m [32m INFO[0m [2melectrum_client::raw_client[0m[2m:[0m Trying to connect to 34.154.172.18:50013 (attempt 1/1) with timeout 10s    
[2m2025-10-25T20:43:10.895249Z[0m [32m INFO[0m [2mrgb_lightning_node::ldk[0m[2m:[0m Connected to an indexer with the Electrum protocol
[2m2025-10-25T20:43:11.540492Z[0m [32m INFO[0m [2mrgb_lightning_node::ldk[0m[2m:[0m Using a custom proxy
[2m2025-10-25T20:43:12.361760Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"PRAGMA foreign_keys = ON; â€¦" [3mdb.statement[0m[2m=[0m"\n\nPRAGMA foreign_keys = ON; \n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m73.967Âµs [3melapsed_secs[0m[2m=[0m7.3967e-5
[2m2025-10-25T20:43:12.363167Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"CREATE TABLE IF NOT â€¦" [3mdb.statement[0m[2m=[0m"\n\nCREATE TABLE IF NOT EXISTS \"seaql_migrations\" ( \"version\" varchar NOT NULL PRIMARY KEY, \"applied_at\" bigint NOT NULL )\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m673.405Âµs [3melapsed_secs[0m[2m=[0m0.000673405
[2m2025-10-25T20:43:12.363308Z[0m [32m INFO[0m [2msea_orm_migration::migrator[0m[2m:[0m Applying all pending migrations
[2m2025-10-25T20:43:12.363524Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"CREATE TABLE IF NOT â€¦" [3mdb.statement[0m[2m=[0m"\n\nCREATE TABLE IF NOT EXISTS \"seaql_migrations\" ( \"version\" varchar NOT NULL PRIMARY KEY, \"applied_at\" bigint NOT NULL )\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m26.501Âµs [3melapsed_secs[0m[2m=[0m2.6501e-5
[2m2025-10-25T20:43:12.364063Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"PRAGMA foreign_keys = ON; â€¦" [3mdb.statement[0m[2m=[0m"\n\nPRAGMA foreign_keys = ON; \n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m32.673Âµs [3melapsed_secs[0m[2m=[0m3.2673e-5
[2m2025-10-25T20:43:12.364641Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"CREATE TABLE IF NOT â€¦" [3mdb.statement[0m[2m=[0m"\n\nCREATE TABLE IF NOT EXISTS \"seaql_migrations\" ( \"version\" varchar NOT NULL PRIMARY KEY, \"applied_at\" bigint NOT NULL )\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m399.652Âµs [3melapsed_secs[0m[2m=[0m0.000399652
[2m2025-10-25T20:43:12.364905Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"CREATE TABLE IF NOT â€¦" [3mdb.statement[0m[2m=[0m"\n\nCREATE TABLE IF NOT EXISTS \"seaql_migrations\" ( \"version\" varchar NOT NULL PRIMARY KEY, \"applied_at\" bigint NOT NULL )\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m29.256Âµs [3melapsed_secs[0m[2m=[0m2.9256e-5
[2m2025-10-25T20:43:12.365287Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"SELECT \"version\", \"applied_at\" FROM â€¦" [3mdb.statement[0m[2m=[0m"\n\nSELECT \"version\", \"applied_at\" FROM \"seaql_migrations\" ORDER BY \"version\" ASC\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m1 [3melapsed[0m[2m=[0m105.087Âµs [3melapsed_secs[0m[2m=[0m0.000105087
[2m2025-10-25T20:43:12.365475Z[0m [32m INFO[0m [2msea_orm_migration::migrator[0m[2m:[0m No pending migrations
[2m2025-10-25T20:43:12.379406Z[0m [32m INFO[0m [2melectrum_client::raw_client[0m[2m:[0m Trying to connect to 34.154.172.18:50013 (attempt 1/1) with timeout 10s    
[2m2025-10-25T20:43:13.704569Z[0m [32m INFO[0m [2melectrum::raw_client[0m[2m:[0m Trying to connect to 34.154.172.18:50013 (attempt 1/1) with timeout 10s    
[2m2025-10-25T20:43:21.069435Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"SELECT \"txo\".\"idx\", \"txo\".\"txid\", \"txo\".\"vout\", â€¦" [3mdb.statement[0m[2m=[0m"\n\nSELECT \"txo\".\"idx\", \"txo\".\"txid\", \"txo\".\"vout\", \"txo\".\"btc_amount\", \"txo\".\"spent\", \"txo\".\"exists\", \"txo\".\"pending_witness\" FROM \"txo\"\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m4 [3melapsed[0m[2m=[0m214.691Âµs [3melapsed_secs[0m[2m=[0m0.000214691
[2m2025-10-25T20:43:21.070743Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"SELECT \"pending_witness_script\".\"idx\", \"pending_witness_script\".\"script\" FROM â€¦" [3mdb.statement[0m[2m=[0m"\n\nSELECT \"pending_witness_script\".\"idx\", \"pending_witness_script\".\"script\" FROM \"pending_witness_script\"\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m116.749Âµs [3melapsed_secs[0m[2m=[0m0.000116749
[2m2025-10-25T20:43:21.072285Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"SELECT \"txo\".\"idx\", \"txo\".\"txid\", \"txo\".\"vout\", â€¦" [3mdb.statement[0m[2m=[0m"\n\nSELECT \"txo\".\"idx\", \"txo\".\"txid\", \"txo\".\"vout\", \"txo\".\"btc_amount\", \"txo\".\"spent\", \"txo\".\"exists\", \"txo\".\"pending_witness\" FROM \"txo\"\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m4 [3melapsed[0m[2m=[0m61.242Âµs [3melapsed_secs[0m[2m=[0m6.1242e-5
[2m2025-10-25T20:43:21.072952Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"SELECT \"asset\".\"idx\", \"asset\".\"media_idx\", \"asset\".\"id\", â€¦" [3mdb.statement[0m[2m=[0m"\n\nSELECT \"asset\".\"idx\", \"asset\".\"media_idx\", \"asset\".\"id\", \"asset\".\"schema\", \"asset\".\"added_at\", \"asset\".\"details\", \"asset\".\"issued_supply\", \"asset\".\"name\", \"asset\".\"precision\", \"asset\".\"ticker\", \"asset\".\"timestamp\" FROM \"asset\"\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m145.483Âµs [3melapsed_secs[0m[2m=[0m0.000145483
[2m2025-10-25T20:43:21.073317Z[0m [32m INFO[0m [2msqlx::query[0m[2m:[0m [3msummary[0m[2m=[0m"SELECT \"media\".\"idx\", \"media\".\"digest\", \"media\".\"mime\" â€¦" [3mdb.statement[0m[2m=[0m"\n\nSELECT \"media\".\"idx\", \"media\".\"digest\", \"media\".\"mime\" FROM \"media\"\n" [3mrows_affected[0m[2m=[0m0 [3mrows_returned[0m[2m=[0m0 [3melapsed[0m[2m=[0m76.934Âµs [3melapsed_secs[0m[2m=[0m7.6934e-5
[2m2025-10-25T20:43:55.424643Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3muri[0m[2m=[0m/virtual_rgbinvoice [3mrequest_id[0m[2m=[0m4716d0d2-e392-4c9e-9568-37f31f8de9cd[1m}[0m[2m:[0m [2mrgb_lightning_node[0m[2m:[0m STARTED
[2m2025-10-25T20:43:55.425085Z[0m [31mERROR[0m [1mrequest[0m[1m{[0m[3muri[0m[2m=[0m/virtual_rgbinvoice [3mrequest_id[0m[2m=[0m4716d0d2-e392-4c9e-9568-37f31f8de9cd[1m}[0m[2m:[0m [2mrgb_lightning_node::error[0m[2m:[0m APIError: Node is locked (hint: call unlock)
[2m2025-10-25T20:43:55.425298Z[0m [32m INFO[0m [1mrequest[0m[1m{[0m[3muri[0m[2m=[0m/virtual_rgbinvoice [3mrequest_id[0m[2m=[0m4716d0d2-e392-4c9e-9568-37f31f8de9cd [3mstatus_code[0m[2m=[0m403 Forbidden[1m}[0m[2m:[0m [2mrgb_lightning_node[0m[2m:[0m ENDED in 731.587Âµs
